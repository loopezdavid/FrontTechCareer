<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Skills — El Huesaso GPT</title>
  <link rel="stylesheet" href="../css/neo-glass.css">
  <script src="../js/navigation.js" defer></script>
</head>
<body class="neo-bg">

  <header class="nav glass-sm">
    <div class="brand small">
      <div class="logo-glow">EH</div>
      <div>
        <div class="brand-title small">Skills Detectadas</div>
        <div class="brand-sub muted">Extraídas del CV</div>
      </div>
    </div>
    <nav class="nav-actions">
      <button class="btn ghost" onclick="goTo('matcher')">Volver</button>
      <button class="btn ghost" onclick="goTo('home')">Inicio</button>
      <div id="authArea"></div>
      <script src="../js/auth_ui.js" defer></script>
    </nav>
  </header>

  <main class="skills-main">
    <div class="skills-panel glass">
      <h3>Habilidades</h3>
      <div id="skillsBox" class="skills-box"></div>

      <div class="skills-actions">
        <button class="btn primary" onclick="exportSkills()">Exportar CSV</button>
        <button class="btn ghost" onclick="localStorage.removeItem('skills_detected'); location.reload();">Limpiar</button>
      </div>
    </div>
  </main>

  <script>
    const saved = localStorage.getItem("skills_detected");
    const box = document.getElementById("skillsBox");
    if (!saved) {
      box.innerHTML = "<p class='muted'>No hay skills procesadas aún. Vuelve al matcher y procesa un CV.</p>";
    } else {
      JSON.parse(saved).forEach(skill => {
        const tag = document.createElement("span");
        tag.className = "skill-pill";
        tag.textContent = skill;
        box.appendChild(tag);
      });
    }

    function exportSkills(){
      const s = localStorage.getItem("skills_detected");
      if(!s){ alert("No hay skills para exportar"); return; }
      const arr = JSON.parse(s);
      const csv = arr.map(x=>`"${x.replace(/"/g,'""')}"`).join("\n");
      const blob = new Blob([csv], {type:'text/csv'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'skills.csv';
      a.click();
    }
  </script>

</body>
</html>
